{"remainingRequest":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\babel-loader\\lib\\index.js!D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\src\\visualisations\\nodelinkv2.0.js","dependencies":[{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\src\\visualisations\\nodelinkv2.0.js","mtime":1623769593751},{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622754903031},{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\babel-loader\\lib\\index.js","mtime":1622754902831},{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\eslint-loader\\index.js","mtime":1622754905504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6L19ET0NVTUVOVEVfQU5EUkVFL0dpdEh1Yi9EQkwtUHJvamVjdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICogYXMgZDMgZnJvbSAiZDMiOwoKZnVuY3Rpb24gZ2VuZXJhdGVOZXR3b3JrQ2FudmFzKGVkZ2VzLCBub2Rlcywgc2VsZWN0aW9uKSB7CiAgdmFyIHNpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGVzdFNlbGVjdE5MIikudmFsdWUpOwogIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICB2YXIgdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aXNjb250ZW50IikuY2xpZW50V2lkdGg7CiAgdmFyIGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlzY29udGVudCIpLmNsaWVudEhlaWdodDsKICBjYW52YXMud2lkdGggPSB3OwogIGNhbnZhcy5oZWlnaHQgPSBoOwogIGNvbnNvbGUubG9nKGVkZ2VzKTsKICBjb25zb2xlLmxvZyhub2Rlcyk7CiAgc2lkZS5hcHBlbmRDaGlsZChjYW52YXMpOwogIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICBjdHguc3Ryb2tlU3R5bGUgPSAicmVkIjsKICBjdHgubGluZVdpZHRoID0gMC4xOwogIHZhciB0cmFuc2Zvcm0gPSBkMy56b29tSWRlbnRpdHk7CiAgdmFyIHNpbXVsYXRpb24gPSBkMyAvL2RvbmUKICAuZm9yY2VTaW11bGF0aW9uKG5vZGVzKS5mb3JjZSgiY2hhcmdlIiwgZDMuZm9yY2VNYW55Qm9keSgpLnN0cmVuZ3RoKC01MCkpLmZvcmNlKCJsaW5rIiwgZDMuZm9yY2VMaW5rKCkuaWQoZnVuY3Rpb24gKGQpIHsKICAgIHJldHVybiBkLmVtcGxveWVlSUQ7CiAgfSkubGlua3MoZWRnZXMpKS5mb3JjZSgiY2VudGVyIiwgZDMuZm9yY2VDZW50ZXIodyAvIDIsIGggLyAyKSkub24oInRpY2siLCB0aWNrZWQpOwoKICBmdW5jdGlvbiB0aWNrZWQoKSB7CiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICBjdHgudHJhbnNsYXRlKHRyYW5zZm9ybS54LCB0cmFuc2Zvcm0ueSk7CiAgICBjdHguc2NhbGUodHJhbnNmb3JtLmssIHRyYW5zZm9ybS5rKTsKICAgIGN0eC5iZWdpblBhdGgoKTsKICAgIGVkZ2VzLmZvckVhY2goZHJhd0VkZ2UpOwogICAgY3R4LnN0cm9rZVN0eWxlID0gIiNhYWEiOwogICAgY3R4LnN0cm9rZSgpOwogICAgdmFyIG5laWdoYm91cnMgPSBkcmF3RWRnZXMoZWRnZXMpOwoKICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgICAgX3N0ZXA7CgogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgbm9kZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAvLyBDaGFuZ2Ugc2VsZWN0ZWQgbm9kZSB0byBzdGFuZCBvdXQKICAgICAgICBpZiAobm9kZSA9PSBzZWxlY3Rpb24pIHsKICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICIjMDAwIjsKICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAiI2ZmMDAwMCI7CiAgICAgICAgfSBlbHNlIGlmIChuZWlnaGJvdXJzLmluZGV4T2Yobm9kZSkgPj0gMCkgewogICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gIiMwMDAiOwogICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDBmZjAwIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gIiNmZmYiOwogICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsKICAgICAgICB9CgogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBkcmF3Tm9kZShub2RlKTsKICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3Iobm9kZSk7CiAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KCiAgICBkcmF3Tm9kZUluZm9ybWF0aW9uKHNlbGVjdGlvbik7CiAgfQoKICBmdW5jdGlvbiBkcmF3RWRnZXMoZWRnZXMpIHsKICAgIHZhciBzZWxlY3Rpb25FZGdlcyA9IFtdOwogICAgdmFyIG5vcm1hbEVkZ2VzID0gW107CiAgICB2YXIgbmVpZ2hib3VycyA9IFtdOwoKICAgIGlmIChzZWxlY3Rpb24gPT0gbnVsbCkgewogICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgIGVkZ2VzLmZvckVhY2goZHJhd0VkZ2UpOwogICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2FhYSI7CiAgICAgIGN0eC5zdHJva2UoKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZWRnZXMpLAogICAgICAgICAgX3N0ZXAyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGVkZ2UgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgaWYgKGVkZ2Uuc291cmNlLmVtcGxveWVlSUQgPT0gc2VsZWN0aW9uLmVtcGxveWVlSUQpIHsKICAgICAgICAgICAgc2VsZWN0aW9uRWRnZXMucHVzaChlZGdlKTsKICAgICAgICAgICAgbmVpZ2hib3Vycy5wdXNoKGVkZ2UudGFyZ2V0KTsKICAgICAgICAgIH0gZWxzZSBpZiAoZWRnZS50YXJnZXQuZW1wbG95ZWVJRCA9PSBzZWxlY3Rpb24uZW1wbG95ZWVJRCkgewogICAgICAgICAgICBzZWxlY3Rpb25FZGdlcy5wdXNoKGVkZ2UpOwogICAgICAgICAgICBuZWlnaGJvdXJzLnB1c2goZWRnZS5zb3VyY2UpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbm9ybWFsRWRnZXMucHVzaChlZGdlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CgogICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgIG5vcm1hbEVkZ2VzLmZvckVhY2goZHJhd0VkZ2UpOwogICAgICBjdHguc3Ryb2tlU3R5bGUgPSAiI2FhYSI7CiAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICBzZWxlY3Rpb25FZGdlcy5mb3JFYWNoKGRyYXdFZGdlKTsKICAgICAgY3R4LnN0cm9rZVN0eWxlID0gIiNmNThhMmMiOwogICAgICBjdHguc3Ryb2tlKCk7CiAgICB9CgogICAgcmV0dXJuIG5laWdoYm91cnM7CiAgfQoKICBmdW5jdGlvbiBkcmF3RWRnZShkKSB7CiAgICBjdHgubW92ZVRvKGQuc291cmNlLngsIGQuc291cmNlLnkpOwogICAgY3R4LmxpbmVUbyhkLnRhcmdldC54LCBkLnRhcmdldC55KTsgLy9jdHguZmlsbFRleHQoZC5zZW50aW1lbnQsICgoZC5zb3VyY2UueCArIGQudGFyZ2V0LngpIC8gMikgKyAxMCAsICgoZC5zb3VyY2UueSArIGQudGFyZ2V0LnkpIC8gMikgKyAzKTsKICAgIC8vY29uc29sZS5sb2coZC5zZW50aW1lbnQpCiAgfQoKICBmdW5jdGlvbiBkcmF3Tm9kZShkKSB7CiAgICBjdHgubW92ZVRvKGQueCwgZC55KTsKICAgIGN0eC5hcmMoZC54LCBkLnksIDMsIDAsIDIgKiBNYXRoLlBJKTsgLy9jdHguZmlsbFRleHQoIklEOiAiICsgZC5lbXBsb3llZUlELCBkLngrMTAsIGQueSszKTsKICB9CgogIGZ1bmN0aW9uIGRyYXdOb2RlSW5mb3JtYXRpb24oZCkgewogICAgaWYgKGQgIT0gbnVsbCkgewogICAgICB2YXIgcG9wdXBYID0gZC54ICsgMTA7CiAgICAgIHZhciBwb3B1cFkgPSBkLnkgKyAxMDsKICAgICAgdmFyIHBvcHVwU2l6ZSA9IGN0eC5tZWFzdXJlVGV4dChkLmVtYWlsKS53aWR0aCArIDQ7CiAgICAgIGN0eC5maWxsU3R5bGUgPSAiI2ZmZiI7CiAgICAgIGN0eC5maWxsUmVjdChwb3B1cFgsIHBvcHVwWSwgcG9wdXBTaXplLCAzNik7CiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICIjMDAwIjsKICAgICAgY3R4LnN0cm9rZVJlY3QocG9wdXBYLCBwb3B1cFksIHBvcHVwU2l6ZSwgMzYpOwogICAgICBjdHguZmlsbFN0eWxlID0gIiMwMDAiOwogICAgICBjdHguZmlsbFRleHQoZXh0cmFjdE5hbWUoZC5lbWFpbCkgKyAiIHwgIiArIGQuZW1wbG95ZWVJRCwgcG9wdXBYICsgMiwgcG9wdXBZICsgMTApOwogICAgICBjdHguZmlsbFRleHQoZC5qb2JUaXRsZSwgcG9wdXBYICsgMiwgcG9wdXBZICsgMjApOwogICAgICBjdHguZmlsbFRleHQoZC5lbWFpbCwgcG9wdXBYICsgMiwgcG9wdXBZICsgMzApOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZXh0cmFjdE5hbWUoZW1haWwpIHsKICAgIC8vIFNwbGljZSBvZmYgdGhlIGVtYWlsIHNlcnZlcgogICAgdmFyIG5hbWVCdWlsZGVyID0gZW1haWwuc3Vic3RyaW5nKDAsIGVtYWlsLmluZGV4T2YoIkAiKSk7IC8vIFNwbGl0IG1haWwgaW50byBzZXBlcmF0ZSBuYW1lcwoKICAgIG5hbWVCdWlsZGVyID0gbmFtZUJ1aWxkZXIuc3BsaXQoIi4iKTsgLy8gSW5pdGlhbGl6ZSBzdXJuYW1lcyBhbmQgY2FwaXRhbGl6ZQoKICAgIHZhciBuYW1lID0gIiI7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lQnVpbGRlci5sZW5ndGg7IGkrKykgewogICAgICBpZiAobmFtZUJ1aWxkZXJbaV0gIT0gbnVsbCAmJiBuYW1lQnVpbGRlcltpXS5sZW5ndGggPiAwKSB7CiAgICAgICAgaWYgKGkgPCBuYW1lQnVpbGRlci5sZW5ndGggLSAxKSB7CiAgICAgICAgICBuYW1lID0gbmFtZSArIG5hbWVCdWlsZGVyW2ldWzBdLnRvVXBwZXJDYXNlKCkgKyAiLiI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5hbWUgPSBuYW1lICsgIiAiICsgbmFtZUJ1aWxkZXJbaV1bMF0udG9VcHBlckNhc2UoKSArIG5hbWVCdWlsZGVyW2ldLnN1YnN0cmluZygxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbmFtZTsKICB9CgogIGZ1bmN0aW9uIGNvbG9yKCkgewogICAgdmFyIHNjYWxlID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApOwogICAgcmV0dXJuIGZ1bmN0aW9uIChkKSB7CiAgICAgIHJldHVybiBzY2FsZShkLmdyb3VwKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB6b29taW5nKGV2ZW50KSB7CiAgICB0cmFuc2Zvcm0gPSBldmVudC50cmFuc2Zvcm07CiAgICB0aWNrZWQoKTsKICB9CgogIGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHsKICAgIGNvbnNvbGUubG9nKGV2ZW50LnN1YmplY3QpOwogICAgc2VsZWN0aW9uID0gZXZlbnQuc3ViamVjdDsKICB9CgogIGZ1bmN0aW9uIGRyYWdOb2RlcyhzaW11bGF0aW9uKSB7CiAgICBmdW5jdGlvbiBkcmFnU3ViamVjdChldmVudCkgewogICAgICByZXR1cm4gc2ltdWxhdGlvbi5maW5kKGV2ZW50LngsIGV2ZW50LnkpOwogICAgfSAvLyBVc2UgZHJhZ1N0YXJ0IGV2ZW50IHRvIGhhY2sgaW4gY2xpY2thYmlsaXR5IGluIEhUTUwgY2FudmFzCgoKICAgIGZ1bmN0aW9uIGRyYWdTdGFydGVkKGV2ZW50KSB7CiAgICAgIG9uQ2xpY2soZXZlbnQpOwogICAgICBpZiAoIWV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwLjMpLnJlc3RhcnQoKTsKICAgICAgZXZlbnQuc3ViamVjdC5meCA9IGV2ZW50LnN1YmplY3QueDsKICAgICAgZXZlbnQuc3ViamVjdC5meSA9IGV2ZW50LnN1YmplY3QueTsKICAgIH0KCiAgICBmdW5jdGlvbiBkcmFnZ2VkKGV2ZW50KSB7CiAgICAgIGV2ZW50LnN1YmplY3QuZnggPSBldmVudC54OwogICAgICBldmVudC5zdWJqZWN0LmZ5ID0gZXZlbnQueTsKICAgIH0KCiAgICBmdW5jdGlvbiBkcmFnRW5kZWQoZXZlbnQpIHsKICAgICAgaWYgKCFldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMCk7CiAgICAgIGV2ZW50LnN1YmplY3QuZnggPSBudWxsOwogICAgICBldmVudC5zdWJqZWN0LmZ5ID0gbnVsbDsKICAgIH0KCiAgICByZXR1cm4gZDMuZHJhZygpLnN1YmplY3QoZHJhZ1N1YmplY3QpLm9uKCJzdGFydCIsIGRyYWdTdGFydGVkKS5vbigiZHJhZyIsIGRyYWdnZWQpLm9uKCJlbmQiLCBkcmFnRW5kZWQpOwogIH0KCiAgY29uc29sZS5sb2coem9vbWluZyk7CiAgcmV0dXJuIGQzLnNlbGVjdChjdHguY2FudmFzKS5jYWxsKGRyYWdOb2RlcyhzaW11bGF0aW9uKSkubm9kZSgpOwp9CgpleHBvcnQgZGVmYXVsdCBnZW5lcmF0ZU5ldHdvcmtDYW52YXM7"},{"version":3,"sources":["D:/_DOCUMENTE_ANDREE/GitHub/DBL-Project/src/visualisations/nodelinkv2.0.js"],"names":["d3","generateNetworkCanvas","edges","nodes","selection","side","document","getElementById","value","canvas","createElement","w","clientWidth","h","clientHeight","width","height","console","log","appendChild","ctx","getContext","strokeStyle","lineWidth","transform","zoomIdentity","simulation","forceSimulation","force","forceManyBody","strength","forceLink","id","d","employeeID","links","forceCenter","on","ticked","clearRect","translate","x","y","scale","k","beginPath","forEach","drawEdge","stroke","neighbours","drawEdges","node","fillStyle","indexOf","drawNode","color","fill","drawNodeInformation","selectionEdges","normalEdges","edge","source","push","target","moveTo","lineTo","arc","Math","PI","popupX","popupY","popupSize","measureText","email","fillRect","strokeRect","fillText","extractName","jobTitle","nameBuilder","substring","split","name","i","length","toUpperCase","scaleOrdinal","schemeCategory10","group","zooming","event","onClick","subject","dragNodes","dragSubject","find","dragStarted","active","alphaTarget","restart","fx","fy","dragged","dragEnded","drag","select","call"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\r\n\r\n\r\n\r\nfunction generateNetworkCanvas(edges, nodes, selection) {\r\n    var side = document.getElementById(document.getElementById(\"testSelectNL\").value);\r\n    var canvas = document.createElement('canvas');\r\n    var w = document.getElementById(\"viscontent\").clientWidth;\r\n    var h = document.getElementById(\"viscontent\").clientHeight;\r\n\r\n    canvas.width = w;\r\n    canvas.height = h;\r\n    console.log(edges);\r\n    console.log(nodes);\r\n\r\n    side.appendChild(canvas);\r\n\r\n    var ctx = canvas.getContext(\"2d\");\r\n    ctx.strokeStyle = \"red\"\r\n    ctx.lineWidth = 0.1;\r\n\r\n\r\n    var transform = d3.zoomIdentity;\r\n    \r\n    var simulation = d3 //done\r\n    .forceSimulation(nodes)\r\n    .force(\"charge\", d3.forceManyBody().strength(-50))\r\n    .force(\r\n      \"link\",\r\n      d3\r\n        .forceLink()\r\n        .id(function (d) {\r\n          return d.employeeID;\r\n        })\r\n        .links(edges)\r\n    )\r\n    .force(\"center\", d3.forceCenter(w / 2, h / 2))\r\n    .on(\"tick\", ticked);\r\n\r\n    function ticked() {\r\n        ctx.clearRect(0,0, canvas.width, canvas.height);\r\n        ctx.translate(transform.x, transform.y);\r\n        ctx.scale(transform.k, transform.k);\r\n        ctx.beginPath();\r\n        edges.forEach(drawEdge);\r\n        ctx.strokeStyle = \"#aaa\";\r\n        ctx.stroke();\r\n\r\n        var neighbours = drawEdges(edges);\r\n        \r\n        \r\n        for (const node of nodes) {\r\n            // Change selected node to stand out\r\n            if (node == selection) {\r\n                ctx.strokeStyle = \"#000\";\r\n                ctx.fillStyle = \"#ff0000\";\r\n            } else if (neighbours.indexOf(node) >= 0) {\r\n                ctx.strokeStyle = \"#000\";\r\n                ctx.fillStyle = \"#00ff00\";\r\n            } else {\r\n                ctx.strokeStyle = \"#fff\";\r\n                ctx.fillStyle = \"#000\";\r\n            }\r\n            ctx.beginPath();\r\n            drawNode(node) \r\n            ctx.fillStyle = color(node);\r\n            ctx.fill();\r\n            ctx.stroke();\r\n        }\r\n        drawNodeInformation(selection);\r\n\r\n    }\r\n\r\n    function drawEdges(edges) {\r\n        var selectionEdges = [];\r\n        var normalEdges = [];\r\n        var neighbours = [];\r\n        if (selection == null) {\r\n            ctx.beginPath();\r\n            edges.forEach(drawEdge);\r\n            ctx.strokeStyle = \"#aaa\";\r\n            ctx.stroke();\r\n        } else {\r\n            for (const edge of edges) {\r\n                if (edge.source.employeeID == selection.employeeID) {\r\n                    selectionEdges.push(edge);\r\n                    neighbours.push(edge.target);\r\n                } else if (edge.target.employeeID == selection.employeeID) {\r\n                    selectionEdges.push(edge);\r\n                    neighbours.push(edge.source);\r\n                } else {\r\n                    normalEdges.push(edge);\r\n                }\r\n            }\r\n            ctx.beginPath();\r\n            normalEdges.forEach(drawEdge);\r\n            ctx.strokeStyle = \"#aaa\";\r\n            ctx.stroke();\r\n\r\n            ctx.beginPath();\r\n            selectionEdges.forEach(drawEdge);\r\n            ctx.strokeStyle = \"#f58a2c\";\r\n            ctx.stroke();\r\n        }\r\n\r\n        return neighbours;\r\n    }\r\n\r\n    function drawEdge(d) {\r\n        ctx.moveTo(d.source.x, d.source.y);\r\n        ctx.lineTo(d.target.x, d.target.y);\r\n        //ctx.fillText(d.sentiment, ((d.source.x + d.target.x) / 2) + 10 , ((d.source.y + d.target.y) / 2) + 3);\r\n        //console.log(d.sentiment)\r\n    }\r\n\r\n    function drawNode(d) {\r\n        ctx.moveTo(d.x, d.y);\r\n        ctx.arc(d.x, d.y, 3, 0, 2 * Math.PI);\r\n        //ctx.fillText(\"ID: \" + d.employeeID, d.x+10, d.y+3);\r\n    }\r\n\r\n    function drawNodeInformation(d) {\r\n        if (d != null) {\r\n            var popupX = d.x + 10;\r\n            var popupY = d.y + 10;\r\n            var popupSize = ctx.measureText(d.email).width + 4;\r\n            ctx.fillStyle = \"#fff\";\r\n            ctx.fillRect(popupX, popupY, popupSize, 36);\r\n\r\n            ctx.strokeStyle = \"#000\"\r\n            ctx.strokeRect(popupX, popupY, popupSize, 36);\r\n            ctx.fillStyle = \"#000\";\r\n            ctx.fillText(extractName(d.email) + \" | \" + d.employeeID, popupX + 2, popupY + 10);\r\n            ctx.fillText(d.jobTitle, popupX + 2, popupY + 20);\r\n            ctx.fillText(d.email, popupX + 2, popupY + 30);\r\n        }\r\n    }\r\n\r\n    function extractName(email) {\r\n        // Splice off the email server\r\n        var nameBuilder = email.substring(0, email.indexOf(\"@\"));\r\n        // Split mail into seperate names\r\n        nameBuilder = nameBuilder.split(\".\");\r\n        // Initialize surnames and capitalize\r\n        var name = \"\";\r\n        for (var i = 0; i < nameBuilder.length; i++) {\r\n            if (nameBuilder[i] != null && nameBuilder[i].length > 0) {\r\n                if (i < nameBuilder.length-1) {\r\n                    name = name + nameBuilder[i][0].toUpperCase() + \".\";\r\n                } else {\r\n                    name = name + \" \" + nameBuilder[i][0].toUpperCase() + nameBuilder[i].substring(1);\r\n                }\r\n            }\r\n        }\r\n        return name\r\n    }\r\n\r\n    function color() {\r\n        var scale = d3.scaleOrdinal(d3.schemeCategory10);\r\n        return d => scale(d.group);\r\n    }\r\n    \r\n\r\n    function zooming(event) {\r\n      transform = event.transform;\r\n      ticked();\r\n    }\r\n\r\n    function onClick(event) {\r\n        console.log(event.subject);\r\n        selection = event.subject;\r\n    }\r\n\r\n    function dragNodes(simulation) {\r\n        function dragSubject(event) {\r\n            return simulation.find(event.x, event.y);\r\n        }\r\n\r\n        // Use dragStart event to hack in clickability in HTML canvas\r\n        function dragStarted(event) {\r\n          onClick(event);\r\n\r\n          if (!event.active) simulation.alphaTarget(0.3).restart();\r\n          event.subject.fx = event.subject.x;\r\n          event.subject.fy = event.subject.y;\r\n        }\r\n        \r\n        function dragged(event) {\r\n          event.subject.fx = event.x;\r\n          event.subject.fy = event.y;\r\n        }\r\n        \r\n        function dragEnded(event) {\r\n          if (!event.active) simulation.alphaTarget(0);\r\n          event.subject.fx = null;\r\n          event.subject.fy = null;\r\n        }\r\n        \r\n        return d3.drag()\r\n            .subject(dragSubject)\r\n            .on(\"start\", dragStarted)\r\n            .on(\"drag\", dragged)\r\n            .on(\"end\", dragEnded)\r\n        }\r\n\r\n    console.log(zooming)\r\n    \r\n    return d3.select(ctx.canvas).call(dragNodes(simulation)).node();\r\n}\r\n\r\n\r\nexport default generateNetworkCanvas"]}]}