{"remainingRequest":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\babel-loader\\lib\\index.js!D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\src\\visualisations\\adjacencymatrix.js","dependencies":[{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\src\\visualisations\\adjacencymatrix.js","mtime":1624027526889},{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622754903031},{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\babel-loader\\lib\\index.js","mtime":1622754902831},{"path":"D:\\_DOCUMENTE_ANDREE\\GitHub\\DBL-Project\\node_modules\\eslint-loader\\index.js","mtime":1622754905504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWF0aC5sb2cyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgKiBhcyBkMyBmcm9tICJkMyI7CgpmdW5jdGlvbiBnZW5lcmF0ZU1hdHJpeChlZGdlcywgbm9kZXMsIGVkZ2VXZWlnaHRzKSB7CiAgdmFyIHNpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGVzdFNlbGVjdEFNIikudmFsdWU7CiAgdmFyIHcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidmlzY29udGVudCIpLmNsaWVudFdpZHRoOwogIHZhciBoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInZpc2NvbnRlbnQiKS5jbGllbnRIZWlnaHQ7CiAgY29uc29sZS5sb2cobm9kZXMpOwogIHZhciBtaW5PcGFjaXR5ID0gMC4zOyAvLyBvcGFjaXR5IG9mIGFuIGVkZ2Ugd2l0aCB3ZWlnaHQgMQoKICB2YXIgbG9nQ29lZmZpY2llbnQgPSAoMSAtIG1pbk9wYWNpdHkpIC8gTWF0aC5sb2cyKGVkZ2VXZWlnaHRzLm1heFdlaWdodCk7IC8vIGNvZWZpY2llbnQgdGhhdCBpcyB1c2VkIHRvIGNhbGN1bGF0ZSBvcGFjaXR5CgogIHZhciBzcXVhcmVTaXplID0gTWF0aC5mbG9vcihoIC8gbm9kZXMubGVuZ3RoKSAtIDE7CiAgdmFyIHRleHRTcGFjZSA9IHNxdWFyZVNpemUgKiA1OyAvL05PVEU6IHN0aWxsIGhhdmUgdG8gaW1wcm92ZSB0aGlzLCBzbyB0aGF0IHRleHQgZG9lc24ndCBnbyBvdXQgb2YgdGhlIHNjcmVlbiB3aGVuIHJlbmRlcmluZwogIC8vIG5vZGVQb3NpdGlvbnMgaXMgYW4gb2JqZWN0IHRoYXQgc3RvcmVzIHRoZSBwb3NpdGlvbnMgd2hlcmUgdGhlIG5vZGVzIHNob3VsZCBiZSBkaXNwbGF5ZWQgaW4gdGhlIGFkaiBtYXRyaXgKCiAgdmFyIG5vZGVQb3NpdGlvbnMgPSB7fTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgdmFyIHBvc2l0aW9uID0gbm9kZXNbaV0uZW1wbG95ZWVJRC50b1N0cmluZygpOwogICAgbm9kZVBvc2l0aW9uc1twb3NpdGlvbl0gPSBpOwogIH0KCiAgdmFyIHN2ZyA9IGQzLnNlbGVjdCgnIycgKyBzaWRlKS5hcHBlbmQoInN2ZyIpLmF0dHIoImhlaWdodCIsIGgpLmF0dHIoIndpZHRoIiwgdykuY2FsbChkMy56b29tKCkub24oInpvb20iLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHN2Zy5hdHRyKCJ0cmFuc2Zvcm0iLCBldmVudC50cmFuc2Zvcm0pLnNjYWxlRXh0ZW50KFsxLCAyNF0pOwogIH0pKS5hcHBlbmQoImciKTsKICB2YXIgZ3JpZCA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJncmlkIik7CiAgZ3JpZC5zZWxlY3RBbGwoInJlY3QiKS5kYXRhKGVkZ2VzKS5lbnRlcigpLmFwcGVuZCgicmVjdCIpLmF0dHIoIngiLCBmdW5jdGlvbiAoZCkgewogICAgcmV0dXJuIG5vZGVQb3NpdGlvbnNbZC50YXJnZXQudG9TdHJpbmcoKV0gKiBzcXVhcmVTaXplICsgdGV4dFNwYWNlOwogIH0pLmF0dHIoInkiLCBmdW5jdGlvbiAoZCkgewogICAgcmV0dXJuIG5vZGVQb3NpdGlvbnNbZC5zb3VyY2UudG9TdHJpbmcoKV0gKiBzcXVhcmVTaXplICsgdGV4dFNwYWNlOwogIH0pLmF0dHIoImhlaWdodCIsIHNxdWFyZVNpemUpLmF0dHIoIndpZHRoIiwgc3F1YXJlU2l6ZSkuYXR0cigiZmlsbCIsICJ3aGl0ZSIpLnN0eWxlKCJvcGFjaXR5IiwgZnVuY3Rpb24gKGQpIHsKICAgIHJldHVybiBNYXRoLmxvZzIoZC53ZWlnaHQpICogbG9nQ29lZmZpY2llbnQgKyBtaW5PcGFjaXR5OwogIH0pOyAvLyB0aGlzIG1ha2VzIGl0IHNvIHRoYXQgb3ZlcmxheWVkIHJlY3RhbmdsZXMgY2FuIGJlIHNlZW4gKGtpbmQgb2YgYWRkcyB3ZWlnaHRzIHRvIHRoZSBlZGdlcykKCiAgdmFyIHRleHRMZWZ0ID0gc3ZnLmFwcGVuZCgiZyIpLmF0dHIoImlkIiwgInRleHRMZWZ0Iik7CiAgdmFyIHRleHRVcCA9IHN2Zy5hcHBlbmQoImciKS5hdHRyKCJpZCIsICJ0ZXh0VXAiKTsKICB0ZXh0TGVmdC5zZWxlY3RBbGwoInRleHQiKS5kYXRhKG5vZGVzKS5lbnRlcigpLmFwcGVuZCgidGV4dCIpLmF0dHIoInRleHQtYW5jaG9yIiwgImVuZCIpLmF0dHIoIngiLCB0ZXh0U3BhY2UpLmF0dHIoInkiLCBmdW5jdGlvbiAoZCkgewogICAgcmV0dXJuIG5vZGVQb3NpdGlvbnNbZC5lbXBsb3llZUlELnRvU3RyaW5nKCldICogc3F1YXJlU2l6ZSArIHRleHRTcGFjZSArIHNxdWFyZVNpemUgKiAwLjc1OwogIH0pLnRleHQoZnVuY3Rpb24gKGQpIHsKICAgIHJldHVybiBkLmVtYWlsOwogIH0pLnN0eWxlKCJmaWxsIiwgIndoaXRlIikuc3R5bGUoImZvbnQtc2l6ZSIsIHNxdWFyZVNpemUpOwogIHRleHRVcC5zZWxlY3RBbGwoInRleHQiKS5kYXRhKG5vZGVzKS5lbnRlcigpLmFwcGVuZCgidGV4dCIpLmF0dHIoInRleHQtYW5jaG9yIiwgImVuZCIpLmF0dHIoInRyYW5zZm9ybSIsICJyb3RhdGUoOTApIikuYXR0cigieCIsIHRleHRTcGFjZSkuYXR0cigieSIsIGZ1bmN0aW9uIChkKSB7CiAgICByZXR1cm4gLShub2RlUG9zaXRpb25zW2QuZW1wbG95ZWVJRC50b1N0cmluZygpXSAqIHNxdWFyZVNpemUgKyB0ZXh0U3BhY2UgKyBzcXVhcmVTaXplICogMC4yNSk7CiAgfSkudGV4dChmdW5jdGlvbiAoZCkgewogICAgcmV0dXJuIGQuZW1haWw7CiAgfSkuc3R5bGUoImZpbGwiLCAid2hpdGUiKS5zdHlsZSgiZm9udC1zaXplIiwgc3F1YXJlU2l6ZSk7CiAgY29uc29sZS5sb2codGV4dExlZnQsIHRleHRVcCk7CiAgY29uc29sZS5sb2coZ3JpZC5ub2RlcygpKTsKfQoKZXhwb3J0IGRlZmF1bHQgZ2VuZXJhdGVNYXRyaXg7"},{"version":3,"sources":["D:/_DOCUMENTE_ANDREE/GitHub/DBL-Project/src/visualisations/adjacencymatrix.js"],"names":["d3","generateMatrix","edges","nodes","edgeWeights","side","document","getElementById","value","w","clientWidth","h","clientHeight","console","log","minOpacity","logCoefficient","Math","log2","maxWeight","squareSize","floor","length","textSpace","nodePositions","i","position","employeeID","toString","svg","select","append","attr","call","zoom","on","event","transform","scaleExtent","grid","selectAll","data","enter","d","target","source","style","weight","textLeft","textUp","text","email"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\r\n\r\nfunction generateMatrix(edges, nodes, edgeWeights) {\r\n\r\n  var side = document.getElementById(\"testSelectAM\").value;\r\n  var w = document.getElementById(\"viscontent\").clientWidth;\r\n  var h = document.getElementById(\"viscontent\").clientHeight;\r\n\r\n  console.log(nodes);\r\n\r\n  const minOpacity = 0.3; // opacity of an edge with weight 1\r\n  const logCoefficient = (1 - minOpacity) / Math.log2(edgeWeights.maxWeight); // coeficient that is used to calculate opacity\r\n  const squareSize = Math.floor(h / nodes.length) - 1;\r\n  const textSpace = squareSize * 5; //NOTE: still have to improve this, so that text doesn't go out of the screen when rendering\r\n\r\n  // nodePositions is an object that stores the positions where the nodes should be displayed in the adj matrix\r\n  var nodePositions = {};\r\n  for (var i = 0; i < nodes.length; i++) {\r\n    let position = (nodes[i].employeeID).toString()\r\n    nodePositions[position] = i;\r\n  }\r\n\r\n  var svg = d3\r\n    .select('#' + side)\r\n    .append(\"svg\")\r\n    .attr(\"height\", h)\r\n    .attr(\"width\", w)\r\n    .call(\r\n      d3.zoom().on(\"zoom\", (event) => {\r\n        svg.attr(\"transform\", event.transform).scaleExtent([1, 24]);\r\n      })\r\n    )\r\n    .append(\"g\");\r\n\r\n  var grid = svg.append(\"g\").attr(\"id\", \"grid\");\r\n    grid.selectAll(\"rect\")\r\n    .data(edges)\r\n    .enter()\r\n    .append(\"rect\")\r\n    .attr(\"x\", (d) => {\r\n      return (nodePositions[(d.target).toString()] * squareSize) + textSpace;\r\n    })\r\n    .attr(\"y\", (d) => {\r\n      return (nodePositions[(d.source).toString()] * squareSize) + textSpace;\r\n    })\r\n    .attr(\"height\", squareSize)\r\n    .attr(\"width\", squareSize)\r\n    .attr(\"fill\", \"white\")\r\n    .style(\"opacity\", ((d) => { return (Math.log2(d.weight) * logCoefficient) + minOpacity }));  // this makes it so that overlayed rectangles can be seen (kind of adds weights to the edges)\r\n\r\n  var textLeft = svg.append(\"g\").attr(\"id\", \"textLeft\");\r\n  var textUp = svg.append(\"g\").attr(\"id\", \"textUp\");\r\n\r\n  textLeft.selectAll(\"text\")\r\n    .data(nodes)\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"text-anchor\", \"end\")\r\n    .attr(\"x\", textSpace)\r\n    .attr(\"y\", (d) => {\r\n      return (nodePositions[(d.employeeID).toString()]*squareSize) + textSpace + (squareSize*0.75);\r\n    })\r\n    .text((d) => {\r\n      return d.email;\r\n    })\r\n    .style(\"fill\", \"white\")\r\n    .style(\"font-size\", squareSize);\r\n\r\n    textUp.selectAll(\"text\")\r\n    .data(nodes)\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"text-anchor\", \"end\")\r\n    .attr(\"transform\", \"rotate(90)\")\r\n    .attr(\"x\", textSpace)\r\n    .attr(\"y\", (d) => {\r\n      return -((nodePositions[(d.employeeID).toString()]*squareSize) + textSpace + (squareSize*0.25));\r\n    })\r\n    .text((d) => {\r\n      return d.email;\r\n    })\r\n    .style(\"fill\", \"white\")\r\n    .style(\"font-size\", squareSize);\r\n\r\n  console.log(textLeft, textUp);\r\n  console.log(grid.nodes());\r\n}\r\n\r\nexport default generateMatrix"]}]}